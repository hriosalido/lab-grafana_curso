## 2. Fundamentos del plugin Diagram Panel

游꿢 **Qu칠 es**:
El plugin **Diagram Panel** permite crear gr치ficos de flujo directamente dentro de Grafana utilizando la sintaxis **MermaidJS**. Est치 pensado para representar visualmente procesos de negocio, flujos de trabajo, etapas de producci칩n o cualquier l칩gica condicional o jer치rquica.

---

### 游빌 쯈u칠 lo hace diferente?

* Permite **dibujar nodos y relaciones** de forma declarativa con texto Mermaid.
* Soporta **datos din치micos**: si un nodo se llama como una columna (`Field`) de los datos, Grafana lo rellena con el valor.
* Se puede extender visualmente con:

  * Mermaid `classDef` para definir colores y estilos b치sicos.
  * **CSS inyectado** para personalizaci칩n avanzada.

---

### 游닂 Sintaxis Mermaid soportada

El panel Diagram permite Mermaid en su variante `graph`, especialmente en modos:

* `graph LR` (de izquierda a derecha)
* `graph TD` (de arriba a abajo)

Ejemplo m칤nimo:

```mermaid
graph LR
  Pedido --> EnPreparaci칩n --> Enviado
```

---

### 游댕 쮺칩mo se vinculan los datos?

* Si la serie de datos tiene una columna llamada `Pedido`, y existe un nodo `Pedido` en el Mermaid, el valor se inyecta autom치ticamente en el nodo.
* Se puede personalizar el n칰mero de decimales, unidad o el formato visual desde **Value mappings**, **Overrides** o con estilos Mermaid.

---

### 游 Ideas clave para el alumno

* La **clave de vinculaci칩n** es el nombre del nodo (no el label visual).
* Los datos se inyectan al final de la cadena de renderizado Mermaid, por lo tanto:

  * primero se dibuja el nodo (estructura)
  * luego Grafana le inserta el valor din치mico
* Si el nodo no tiene matching con ning칰n campo, **no mostrar치 dato**.